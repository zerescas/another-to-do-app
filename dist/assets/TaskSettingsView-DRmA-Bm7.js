import{d as P,r as T,u as S,g as y,c as j,a as c,b as t,f as n,F as m,e as u,t as _,h as w,w as N,C as B,T as x,i as $,o as i,j as b,n as I,k as V,p as D,l as E,_ as F}from"./index-BhN4RD5f.js";import{C as O,p as L,u as R}from"./CustomColorSelector-1oarpBNo.js";import{_ as z,N as M}from"./NavBar-CH7aeHDl.js";const v=l=>(D("data-v-12a61cd4"),l=l(),E(),l),U={class:"app-layout app-layout--desktop-float"},W={class:"settings-container app-layout--padding"},q={class:"settings-section"},A=v(()=>t("h2",null,"Settings",-1)),G={class:"settings-cards"},H={class:"item-card setting-card"},J=v(()=>t("div",{class:"setting-card-title"},"Color",-1)),K={class:"setting-card-value"},Q={class:"item-card setting-card column-span-2"},X=v(()=>t("div",{class:"setting-card-title"},"Project",-1)),Y={key:1},Z={class:"projects-list"},tt={class:"project-item-wrapper"},et=v(()=>t("p",{class:"todo-content"},"None",-1)),st=[et],ot=["onClick"],at={class:"todo-content-wrapper"},nt={class:"todo-content"},it={key:0,class:"subitems-count"},ct=P({__name:"TaskSettingsView",setup(l){const k=$().params.id,r=T(!1),d=S(),p=y();let e=d.getTask(k);const f=T({color:"tasks",customTitle:"Task Edit",customTitleMode:"text",fallbackBackRouteName:"Tasks"}),h=j(()=>{var o;return(o=p.getProject(e==null?void 0:e.value.pinnedToProject))==null?void 0:o.value.content});function C(o){e&&d.updateTask(e==null?void 0:e.value.id,{color:o})}function g(o){e&&(o?L(e.value,o,d,p):R(e.value,d,p)),r.value=!1}return(o,a)=>(i(),c(m,null,[t("div",U,[t("div",W,[n(e)?(i(),c(m,{key:0},[u(z,{settings:{editableContent:!0},toDo:n(e),onUpdateTodo:a[0]||(a[0]=s=>n(e)&&n(d).updateTask(n(e).id,s))},null,8,["toDo"]),t("section",q,[A,t("div",G,[t("div",H,[J,t("div",K,[u(O,{value:n(e).color??"",onInput:C},null,8,["value"])])]),t("div",Q,[X,t("div",{class:"setting-card-value setting-card-value--limited setting-card-value--editable",onClick:a[1]||(a[1]=s=>r.value=!0)},_(h.value??"Not pinned"),1)])])])],64)):(i(),c("div",Y,"Error: Task with id "+_(n(k))+" doesn't exists",1))]),u(M,{settings:f.value},null,8,["settings"])]),(i(),w(x,{to:"#app"},[u(B,{isPopupOpened:r.value,contentWrapperClass:"app-layout app-layout--centered app-layout--padding",headerTitle:"Select a project to pin",onClosePressed:a[3]||(a[3]=s=>r.value=!1)},{default:N(()=>[t("div",Z,[t("div",tt,[t("div",{class:"item-card",onClick:a[2]||(a[2]=s=>g(null))},st)]),(i(!0),c(m,null,b(n(p).projects,s=>(i(),c("div",{key:s.id,class:"project-item-wrapper"},[t("div",{class:"item-card item-card--decorated todo-item",style:I(`--item-card-accent: ${s.color}`),onClick:lt=>g(s)},[t("div",at,[t("p",nt,_(s.content),1),s.pinnedTasks?(i(),c("sup",it," + "+_(s.pinnedTasks.length)+" Tasks ",1)):V("",!0)])],12,ot)]))),128))])]),_:1},8,["isPopupOpened"])]))],64))}}),_t=F(ct,[["__scopeId","data-v-12a61cd4"]]);export{_t as default};
